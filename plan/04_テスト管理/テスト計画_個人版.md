# テスト計画 - 個人開発版

**プロジェクト:** ニュース自動配信システム  
**作成者:** 個人開発プロジェクト  
**作成日:** 2025年8月8日

---

## 🧪 テスト戦略

### 基本方針
- **シンプルかつ実用的:** 複雑なテストフレームワークを避け、必要最小限のテスト
- **重要機能優先:** コア機能とエラーハンドリングを優先的にテスト
- **手動と自動のバランス:** 重要部分は自動テスト、その他は手動テスト

### テストレベル
1. **ユニットテスト** - 各モジュールの基本動作確認
2. **統合テスト** - モジュール間連携の確認
3. **システムテスト** - 全体フローの動作確認
4. **手動テスト** - 実際の使用シナリオテスト

---

## 📝 テスト項目一覧

### ユニットテスト

#### ニュース収集モジュール
- [ ] NewsAPI正常レスポンス処理
- [ ] APIエラーレスポンス処理
- [ ] レート制限エラー処理
- [ ] キャッシュ機能動作
- [ ] 重複記事除去機能

#### 翻訳モジュール
- [ ] 言語自動判定機能
- [ ] DeepL API翻訳処理
- [ ] バッチ翻訳機能
- [ ] 文字数制限管理
- [ ] 翻訳キャッシュ機能

#### AI分析モジュール
- [ ] Claude APIリクエスト/レスポンス
- [ ] JSONパーシング処理
- [ ] 分析結果検証
- [ ] 簡易分析フォールバック
- [ ] Context7機能動作

#### データベースモジュール
- [ ] SQLite接続処理
- [ ] CRUD操作機能
- [ ] トランザクション処理
- [ ] キャッシュテーブル操作
- [ ] データバックアップ機能

#### レポート生成モジュール
- [ ] HTMLテンプレートレンダリング
- [ ] PDF変換処理
- [ ] 統計情報計算
- [ ] カテゴリ別整理
- [ ] 緊急アラート検出

#### メール配信モジュール
- [ ] Gmail OAuth2認証
- [ ] HTMLメール作成
- [ ] PDF添付機能
- [ ] メール送信処理
- [ ] 配信履歴記録

---

### 統合テスト

#### API連携テスト
- [ ] ニュース収集 → データベース保存
- [ ] 記事収集 → 翻訳 → 分析 フロー
- [ ] 分析結果 → レポート生成 フロー
- [ ] レポート → メール配信 フロー
- [ ] エラー発生時のフォールバック動作

#### パフォーマンステスト
- [ ] 100件の記事処理時間計測
- [ ] API制限内での処理能力確認
- [ ] メモリ使用量モニタリング
- [ ] キャッシュ効果測定

---

### システムテスト

#### エンドツーエンドテスト
- [ ] 完全なニュース収集フロー時間計測
- [ ] 日本語ローカライゼーション動作確認
- [ ] Context7機能有効化確認
- [ ] 緊急時自動配信機能
- [ ] スケジュール実行 (7:00, 12:00, 18:00)

#### エラーシナリオテスト
- [ ] APIキー無効時の動作
- [ ] ネットワーク断終時の動作
- [ ] ディスク容量不足時の動作
- [ ] データベースロック時の動作
- [ ] 異常データ受信時の動作

---

### 手動テスト

#### ユーザビリティテスト
- [ ] メールレポートの読みやすさ
- [ ] PDFレポートのレイアウト・フォーマット
- [ ] エラーメッセージのわかりやすさ
- [ ] ログ情報の有用性

#### 実用性テスト
- [ ] 1週間の連続運用テスト
- [ ] 様々なニュースカテゴリでの動作確認
- [ ] AI分析品質の主観評価
- [ ] 翻訳品質の主観評価
- [ ] レポート情報の有用性評価

---

## 📅 テストスケジュール

### Phase 2中のテスト (9月)
- **Week 1 (9/1-9/7):** ニュース収集モジュールテスト
- **Week 2 (9/8-9/14):** 翻訳モジュールテスト
- **Week 3 (9/15-9/21):** AI分析モジュールテスト
- **Week 4 (9/22-9/28):** データベースモジュールテスト
- **Week 5 (9/29-9/30):** Phase 2統合テスト

### Phase 3中のテスト (10月)
- **Week 1-2:** レポート生成モジュールテスト
- **Week 3:** メール配信モジュールテスト
- **Week 4:** Phase 3統合テスト

### Phase 4: 本格テスト (11月)
- **Week 1 (11/1-11/7):** システムテスト全項目
- **Week 2 (11/8-11/14):** エラーシナリオテスト
- **Week 3 (11/15-11/21):** パフォーマンステスト・手動テスト
- **Week 4 (11/22-11/28):** 実用性テスト・バグ修正
- **11/29-11/30:** 本番リリース準備

---

## 🛠️ テストツール・環境

### 自動テスト環境
- **フレームワーク:** pytest (シンプルで実用的)
- **モッキング:** unittest.mock (標準ライブラリ)
- **カバレッジ:** coverage.py (テストカバレッジ測定)

### テストデータ
- **モックAPIレスポンス:** JSONファイルで管理
- **テスト用データベース:** メモリ内SQLite使用
- **サンプルデータ:** 実際のニュース記事をベースに作成

### テスト実行コマンド
```bash
# 全テスト実行
pytest tests/ -v

# カバレッジ付きテスト
pytest tests/ --cov=src --cov-report=html

# 特定モジュールのみ
pytest tests/test_collectors.py -v

# エラー時の詳細出力
pytest tests/ -v -s --tb=long
```

---

## 📊 テスト結果管理

### テストメトリクス
- **カバレッジ目標:** 80%以上
- **パス率目標:** 95%以上
- **パフォーマンス:** 全体処理時10分以内

### テスト結果記録
- **各Phase終了時:** テスト結果レポート作成
- **バグ管理:** 発見したバグの記録・追跡
- **改善点:** テストで発見した改善点の記録

---

## 🚨 不具合対応

### 不具合管理
- **発見時:** 即座にGitHub Issuesで記録
- **優先度付け:** Critical > High > Medium > Low
- **修正対応:** 各Phase終了前に修正完了

### 不具合分類
- **Critical:** システムが動作しない、データ消失
- **High:** 主要機能が動作しない
- **Medium:** 一部機能に問題がある
- **Low:** UI/UXの改善、軽微な問題

---

## 📋 テストチェックリスト (各Phase終了時)

### Phase 2終了時 (9/30)
- [ ] 全ユニットテストパス
- [ ] コア機能統合テストパス
- [ ] API連携テストパス
- [ ] カバレッジ 80%以上
- [ ] パフォーマンス目標達成

### Phase 3終了時 (10/31)
- [ ] レポート生成テストパス
- [ ] メール配信テストパス
- [ ] エンドツーエンドテストパス
- [ ] 手動テスト実施

### Phase 4終了時 (11/30)
- [ ] 全テストケースパス
- [ ] 本番環境テスト完了
- [ ] 1週間の連続運用テスト成功
- [ ] ユーザビリティ確認完了
- [ ] **本番リリース準備完了**

---

**最終更新:** 2025年8月8日  
**作成者:** 個人開発プロジェクト  
**ステータス:** テスト計画初版完成