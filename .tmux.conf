# News Delivery System - tmux Configuration
# ãƒ‹ãƒ¥ãƒ¼ã‚¹è‡ªå‹•é…ä¿¡ã‚·ã‚¹ãƒ†ãƒ ç”¨tmuxè¨­å®š

# åŸºæœ¬è¨­å®š
set -g default-terminal "screen-256color"
set -g history-limit 10000
set -g mouse on

# ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—æ™‚é–“ã‚’çŸ­ç¸®ï¼ˆVimãªã©ã§ã®å¿œç­”æ€§å‘ä¸Šï¼‰
set -sg escape-time 1

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¨ãƒšã‚¤ãƒ³ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’1ã‹ã‚‰é–‹å§‹
set -g base-index 1
setw -g pane-base-index 1

# ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚­ãƒ¼ã‚’Ctrl+aã«å¤‰æ›´ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
# set -g prefix C-a
# unbind C-b
# bind C-a send-prefix

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªãƒ­ãƒ¼ãƒ‰
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# ãƒšã‚¤ãƒ³åˆ†å‰²ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ï¼ˆã‚ˆã‚Šç›´æ„Ÿçš„ã«ï¼‰
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# ãƒšã‚¤ãƒ³ç§»å‹•ï¼ˆVimé¢¨ï¼‰
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# ãƒšã‚¤ãƒ³ã‚µã‚¤ã‚ºèª¿æ•´
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ç§»å‹•
bind -r C-h select-window -t :-
bind -r C-l select-window -t :+

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦åã®è‡ªå‹•å¤‰æ›´ã‚’ç„¡åŠ¹åŒ–
setw -g automatic-rename off
setw -g allow-rename off

# ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ç›£è¦–
setw -g monitor-activity on
set -g visual-activity on

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ³è¨­å®š
set -g status on
set -g status-interval 5
set -g status-position bottom

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ³è‰²è¨­å®š
set -g status-style bg=colour235,fg=white,dim

# å·¦å´ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
set -g status-left-length 40
set -g status-left "#[fg=green]Session: #S #[fg=yellow]#I #[fg=cyan]#P"

# å³å´ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
set -g status-right-length 80
set -g status-right "#[fg=cyan]%Y-%m-%d %H:%M #[fg=green]#(whoami)@#h"

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒªã‚¹ãƒˆ
setw -g window-status-format " #I:#W#F "
setw -g window-status-current-format " #I:#W#F "

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®è‰²è¨­å®š
setw -g window-status-style bg=colour235,fg=colour245
setw -g window-status-current-style bg=colour240,fg=colour255,bold

# ãƒšã‚¤ãƒ³ãƒœãƒ¼ãƒ€ãƒ¼ã¨ã‚¿ã‚¤ãƒˆãƒ«è¡¨ç¤º
set -g pane-border-style fg=colour235
set -g pane-active-border-style fg=colour240

# ãƒšã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«è¡¨ç¤ºè¨­å®šï¼ˆã‚¢ã‚¤ã‚³ãƒ³ã¨å½¹å‰²åï¼‰
set -g pane-border-status top
set -g pane-border-format "#[fg=colour82,bg=colour235,bold] #{?pane_active,ğŸ”¥,ğŸ“‹} #T "

# ãƒšã‚¤ãƒ³ç•ªå·ã«ã‚ˆã‚‹è‡ªå‹•ã‚¿ã‚¤ãƒˆãƒ«è¨­å®šï¼ˆæ‰‹å‹•è¨­å®šã«å¤‰æ›´ï¼‰
# set-hook -g after-split-window 'run-shell "/mnt/e/news-delivery-system/scripts/tmux-pane-title.sh"'
# set-hook -g after-new-window 'run-shell "/mnt/e/news-delivery-system/scripts/tmux-pane-title.sh"'

# ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³
set -g message-style fg=colour255,bg=colour235,bold

# News Delivery Systemå°‚ç”¨è¨­å®š
# ã‚»ãƒƒã‚·ãƒ§ãƒ³åã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š
set -g default-command ''
set -g default-shell /bin/bash

# ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–ç”¨ã®è¨­å®š
bind-key L new-window -n "logs" 'tail -f /mnt/e/news-delivery-system/data/logs/*.log'

# ç·Šæ€¥æ™‚ã®ã‚·ã‚¹ãƒ†ãƒ ãƒã‚§ãƒƒã‚¯
bind-key C new-window -n "check" 'cd /mnt/e/news-delivery-system && python main.py check'

# æ‰‹å‹•å®Ÿè¡Œç”¨ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
bind-key D new-window -n "daily" 'cd /mnt/e/news-delivery-system && python main.py daily --verbose'
bind-key U new-window -n "urgent" 'cd /mnt/e/news-delivery-system && python main.py urgent --verbose'

# ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ä¿å­˜ã¨å¾©å…ƒï¼ˆtmux-resurrectãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä½¿ç”¨æ™‚ï¼‰
# set -g @resurrect-save 'S'
# set -g @resurrect-restore 'R'

# News Delivery Systemã®ã‚«ã‚¹ã‚¿ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
# ãƒ‘ã‚¿ãƒ¼ãƒ³A: æ¨™æº–ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆç”¨ã®è¨­å®š
bind-key A run-shell 'cd /mnt/e/news-delivery-system && ./scripts/tmux-layout-pattern-a.sh'